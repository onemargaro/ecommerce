(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(48),s=n.n(a),o=n(17),i=(n(55),n(56),n(11)),j=n.n(i),l=n(23),d=n(21),u="Authentication context not found. Have your wrapped your components with RootContext.Consumer?",b=r.createContext({signIn:function(e){throw new Error(u)},signUp:function(e){throw new Error(u)},signOut:function(){throw new Error(u)}}),O=n(18),p=n.n(O),h=n(13),x=n.n(h),m=n(0),f=function(e){var t=c.a.useContext(b).signOut;return Object(m.jsxs)(x.a,{color:"primary",fixed:"top",children:[Object(m.jsx)(x.a.Brand,{children:Object(m.jsx)(x.a.Burger,{})}),Object(m.jsxs)(x.a.Menu,{children:[Object(m.jsx)(x.a.Container,{children:Object(m.jsx)(x.a.Item,{renderAs:"span",children:Object(m.jsx)(o.b,{to:"/ecommerce",children:"Home"})})}),Object(m.jsx)(x.a.Container,{position:"end",children:e&&e.user?Object(m.jsxs)(x.a.Item,{dropdown:!0,hoverable:!0,href:"#",children:[Object(m.jsxs)(x.a.Link,{children:[e.user.first_name," ",e.user.last_name]}),Object(m.jsxs)(x.a.Dropdown,{children:[Object(m.jsx)(x.a.Item,{children:e.user.role}),Object(m.jsx)(x.a.Item,{onClick:function(){return t()},children:"Log out"})]})]}):Object(m.jsx)(x.a.Item,{renderAs:"span",children:Object(m.jsx)(o.b,{to:"/ecommerce/login",children:"Login"})})})]})]})},g=n(50),y=n.n(g),v=function(){return Object(m.jsx)(p.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(m.jsx)(y.a,{style:{width:150,height:150,border:"2px solid green",borderTopColor:"transparent",borderRightColor:"transparent"}})})},C=n(25),I=n.n(C),w=n(9),L=n(7),k=n(19),R=n.n(k),S="https://ecomerce-master.herokuapp.com",A=n(24),N=n.n(A),F=n(12),_=n.n(F),D=n(31),E=n.n(D),T=n(30),z=n.n(T),G=n(26),P=n.n(G),U=function(e){var t=e._id,n=e.image,r=e.product_name,c=e.price,a=e.brand,s=e.category,i=e.description;return Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Image,{size:"4by3",src:n}),Object(m.jsxs)(_.a.Content,{children:[Object(m.jsx)(z.a,{children:Object(m.jsxs)(z.a.Item,{children:[Object(m.jsx)(I.a,{size:4,children:r}),Object(m.jsxs)(I.a,{subtitle:!0,size:6,children:[Object(m.jsxs)(P.a.Group,{gapless:!0,children:[Object(m.jsx)(P.a,{color:"primary",children:a}),Object(m.jsxs)(P.a,{color:"info",children:[s," "]})]}),Object(m.jsxs)("span",{className:"is-size-4",children:["$",c]})]})]})}),Object(m.jsx)(E.a,{children:i})]}),Object(m.jsxs)(_.a.Footer,{children:[Object(m.jsx)(_.a.Footer.Item,{renderAs:"span",children:Object(m.jsx)(o.b,{to:"/ecommerce/product/".concat(t),children:"Details"})}),Object(m.jsx)(_.a.Footer.Item,{renderAs:"span",children:"Buy"})]})]})},M={isLoading:!1,products:null,error:null},J=function(e,t){switch(t.type){case"LOAD_PRODUCTS":return Object(L.a)(Object(L.a)({},e),{},{products:t.products,isLoading:!1});case"ERROR":return Object(L.a)(Object(L.a)({},e),{},{error:t.error,isLoading:!1});case"LOADING":return Object(L.a)(Object(L.a)({},e),{},{isLoading:!0})}},B=n(6),W=n(27),H=n.n(W),$=function(){var e=c.a.useReducer(J,M),t=Object(d.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),s=Object(d.a)(a,2),o=s[0],i=s[1],u=function(){var e=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"LOADING"}),e.next=3,R.a.get("".concat(S,"/api/v1/item"));case 3:if(t=e.sent,n=t.data,""!==o){e.next=7;break}return e.abrupt("return",r({type:"LOAD_PRODUCTS",products:n}));case 7:return e.abrupt("return",r({type:"LOAD_PRODUCTS",products:n.filter((function(e){return e.product_name.toLowerCase().includes(o.toLowerCase())}))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.useEffect(Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,R.a.get("".concat(S,"/api/v1/item"));case 4:t=e.sent,n=t.data,r({type:"LOAD_PRODUCTS",products:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r({type:"ERROR",error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),n.isLoading?Object(m.jsx)(v,{}):Object(m.jsx)(p.a,{children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(N.a.Column,{size:10,children:Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"Search"}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(B.Input,{color:"info",value:o,onChange:function(e){var t=e.target.value;i(t)},name:"search",type:"search",placeholder:"Product name"})})]})}),Object(m.jsx)(N.a.Column,{size:2,style:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"2.5em"},children:Object(m.jsx)(B.Field,{children:Object(m.jsx)(B.Control,{children:Object(m.jsx)(H.a,{type:"primary",color:"primary",rounded:!0,onClick:function(){return u()},children:"Search"})})})}),n.products&&n.products.map((function(e){return Object(m.jsx)(N.a.Column,{size:4,children:Object(m.jsx)(U,Object(L.a)({},e))},e._id)}))]})})},q=n(29),K=n(32),Q=n.n(K),V=function(){var e=c.a.useState({email:"margaro@holia123.com",password:"heybro"}),t=Object(d.a)(e,2),n=t[0],r=t[1],a=c.a.useContext(b).signIn,s=function(e){var t=e.target,c=t.name,a=t.value;r(Object(L.a)(Object(L.a)({},n),{},Object(q.a)({},c,a)))};return Object(m.jsx)(p.a,{children:Object(m.jsxs)(Q.a,{children:[Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"Email"}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(B.Input,{value:n.email,onChange:s,name:"email",type:"email",placeholder:"Email@domain.com"})})]}),Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"Password"}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(B.Input,{value:n.password,onChange:s,name:"password",type:"password",placeholder:"Password"})})]}),Object(m.jsxs)(B.Field,{style:{display:"flex",justifyContent:"center"},children:[Object(m.jsx)(B.Control,{children:Object(m.jsx)(H.a,{type:"primary",color:"primary",rounded:!0,renderAs:"span",children:Object(m.jsx)(o.b,{to:"/ecommerce/sign-up",children:"Register"})})}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(H.a,{style:{marginLeft:"1em"},type:"primary",color:"primary",rounded:!0,onClick:function(){return a(n)},children:"Log in"})})]})]})})},X=function(){var e=c.a.useState({email:"holi@mail.com",first_name:"John",last_name:"Doe",password:"holi123",role:"CUSTOMER"}),t=Object(d.a)(e,2),n=t[0],r=t[1],a=c.a.useContext(b).signUp,s=function(e){var t=e.target,c=t.name,a=t.value;r(Object(L.a)(Object(L.a)({},n),{},Object(q.a)({},c,a)))};return Object(m.jsx)(p.a,{children:Object(m.jsxs)(Q.a,{children:[Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"First Name"}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(B.Input,{value:n.first_name,onChange:s,name:"first_name",type:"text",placeholder:"John"})})]}),Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"Last Name"}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(B.Input,{value:n.last_name,onChange:s,name:"last_name",type:"text",placeholder:"Doe"})})]}),Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"Email"}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(B.Input,{value:n.email,onChange:s,name:"email",type:"email",placeholder:"Email@domain.com"})})]}),Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"Password"}),Object(m.jsx)(B.Control,{children:Object(m.jsx)(B.Input,{value:n.password,onChange:s,type:"password",placeholder:"Password"})})]}),Object(m.jsxs)(B.Field,{children:[Object(m.jsx)(B.Label,{children:"Role"}),Object(m.jsx)(B.Control,{children:Object(m.jsxs)(B.Select,{value:n.role,onChange:s,name:"role",children:[Object(m.jsx)("option",{value:"CUSTOMER",children:"CUSTOMER"}),Object(m.jsx)("option",{value:"ADMIN",children:"ADMIN"})]})})]}),Object(m.jsx)(B.Field,{style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(B.Control,{children:Object(m.jsx)(H.a,{color:"primary",rounded:!0,type:"primary",onClick:function(){return a(n)},children:"Create"})})})]})})},Y=function(){var e=c.a.useState({product:null,isLoading:null,error:null}),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(w.g)().productId;if(c.a.useEffect(Object(l.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Object(L.a)(Object(L.a)({},n),{},{isLoading:!0})),e.next=4,R.a.get("".concat(S,"/api/v1/item/").concat(a));case 4:t=e.sent,c=t.data,r(Object(L.a)(Object(L.a)({},n),{},{isLoading:!1,product:c})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(Object(L.a)(Object(L.a)({},n),{},{error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),n.isLoading||!n.product)return Object(m.jsx)(v,{});var s=n.product,o=s.image,i=s.product_name,u=s.brand,b=s.category,O=s.price,h=s.description;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(p.a,{children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(N.a.Column,{size:6,children:Object(m.jsx)(_.a,{children:Object(m.jsx)(_.a.Image,{size:"4by3",src:o})})}),Object(m.jsx)(N.a.Column,{size:6,children:Object(m.jsxs)(_.a,{children:[Object(m.jsxs)(_.a.Content,{children:[Object(m.jsx)(z.a,{children:Object(m.jsxs)(z.a.Item,{children:[Object(m.jsx)(I.a,{size:4,children:i}),Object(m.jsxs)(I.a,{subtitle:!0,size:6,children:[Object(m.jsxs)(P.a.Group,{gapless:!0,children:[Object(m.jsx)(P.a,{color:"primary",children:u}),Object(m.jsxs)(P.a,{color:"info",children:[b," "]})]}),Object(m.jsxs)("span",{className:"is-size-4",children:["$",O]})]})]})}),Object(m.jsx)(E.a,{children:h})]}),Object(m.jsxs)(_.a.Footer,{children:[Object(m.jsx)(_.a.Footer.Item,{renderAs:"span",children:"Add to Car"}),Object(m.jsx)(_.a.Footer.Item,{renderAs:"span",children:"Buy"})]})]})})]})})})},Z=function(){return Object(m.jsxs)(w.c,{children:[Object(m.jsx)(w.a,{exact:!0,path:"/ecommerce/",component:$}),Object(m.jsx)(w.a,{path:"/ecommerce/sign-up",component:X}),Object(m.jsx)(w.a,{path:"/ecommerce/login",component:V}),Object(m.jsx)(w.a,{path:"/ecommerce/product/:productId",component:Y})]})},ee={isLoading:!1,isSignout:!1,userToken:null,me:null,error:null},te=function(e,t){switch(t.type){case"SIGN_IN":return window.localStorage.setItem("token",t.token),Object(L.a)(Object(L.a)({},e),{},{isSignout:!1,isLoading:!1,error:null,userToken:t.token,me:t.me});case"ERROR":return Object(L.a)(Object(L.a)({},e),{},{isSignout:!0,userToken:null,isLoading:!1,error:t.error});case"SIGN_OUT":return window.localStorage.removeItem("token"),Object(L.a)(Object(L.a)({},e),{},{isSignout:!0,isLoading:!1,userToken:null,me:null});case"LOADING":return Object(L.a)(Object(L.a)({},e),{},{isLoading:!0})}},ne=function(){var e=c.a.useReducer(te,ee),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(w.f)(),s=c.a.useMemo((function(){return{signIn:function(){var e=Object(l.a)(j.a.mark((function e(t){var n,c,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,R.a.post("".concat(S,"/api/v1/login"),t);case 4:return n=e.sent,c=n.data,e.next=8,R.a.get("".concat(S,"/api/v1/user/me"),{headers:{Authorization:"JWT ".concat(c.token)}});case 8:s=e.sent,o=s.data,r({type:"SIGN_IN",token:c.token,me:o.user}),a.push("/ecommerce"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r({type:"ERROR",error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),signUp:function(){var e=Object(l.a)(j.a.mark((function e(t){var n,c,s,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,R.a.post("".concat(S,"/api/v1/signup"),t);case 4:return n={email:t.email,password:t.password},e.next=7,R.a.post("".concat(S,"/api/v1/login"),n);case 7:return c=e.sent,s=c.data,e.next=11,R.a.get("".concat(S,"/api/v1/user/me"),{headers:{Authorization:"JWT ".concat(s.token)}});case 11:o=e.sent,i=o.data,r({type:"SIGN_IN",token:s.token,me:i.user}),a.push("/ecommerce"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r({type:"ERROR",error:e.t0});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),signOut:function(){return r({type:"SIGN_OUT"})}}}),[]);return c.a.useEffect(Object(l.a)(j.a.mark((function e(){var t,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=window.localStorage.getItem("token"))){e.next=9;break}return r({type:"LOADING"}),e.next=6,R.a.get("".concat(S,"/api/v1/user/me"),{headers:{Authorization:"JWT ".concat(t)}});case 6:n=e.sent,c=n.data,r({type:"SIGN_IN",token:t,me:c.user});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r({type:"ERROR",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),n.isLoading?Object(m.jsx)(v,{}):n.error?Object(m.jsx)(p.a,{style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)("span",{className:"bd-notification is-danger",children:Object(m.jsxs)(I.a,{subtitle:!0,renderAs:"p",children:["Error: ",n.error.message]})})}):Object(m.jsxs)(b.Provider,{value:s,children:[n.me?Object(m.jsx)(f,{user:n.me}):Object(m.jsx)(f,{}),Object(m.jsx)(Z,{})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(ne,{})})}),document.getElementById("root")),re()},55:function(e,t,n){},56:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.b009b56d.chunk.js.map