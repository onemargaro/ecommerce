(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{150:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(48),s=r.n(a),o=r(13),i=(r(55),r(56),r(11)),j=r.n(i),l=r(24),d=r(18),u="Authentication context not found. Have your wrapped your components with RootContext.Consumer?",b=n.createContext({signIn:function(e){throw new Error(u)},signUp:function(e){throw new Error(u)},signOut:function(){throw new Error(u)}}),p=r(14),O=r.n(p),h=r(12),x=r.n(h),m=r(9),g=r(0),f=function(e){var t=c.a.useContext(b).signOut,r=Object(m.f)(),n=window.localStorage.getItem("token");return Object(g.jsxs)(x.a,{color:"primary",fixed:"top",children:[Object(g.jsx)(x.a.Brand,{children:Object(g.jsx)(x.a.Burger,{})}),Object(g.jsxs)(x.a.Menu,{children:[Object(g.jsx)(x.a.Container,{children:Object(g.jsx)(x.a.Item,{renderAs:"span",children:Object(g.jsx)(o.b,{to:"/ecommerce",children:"Home"})})}),Object(g.jsx)(x.a.Container,{position:"end",children:e&&e.user?Object(g.jsxs)(x.a.Item,{dropdown:!0,hoverable:!0,href:"#",children:[Object(g.jsxs)(x.a.Link,{children:[e.user.first_name," ",e.user.last_name]}),Object(g.jsxs)(x.a.Dropdown,{children:[Object(g.jsx)(x.a.Item,{children:e.user.role}),n&&Object(g.jsx)(x.a.Item,{onClick:function(){return r.push("ecommerce/create-product")},children:"Create Product"}),Object(g.jsx)(x.a.Item,{onClick:function(){return t()},children:"Log out"})]})]}):Object(g.jsx)(x.a.Item,{renderAs:"span",children:Object(g.jsx)(o.b,{to:"/ecommerce/login",children:"Login"})})})]})]})},y=r(50),C=r.n(y),v=function(){return Object(g.jsx)(O.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(g.jsx)(C.a,{style:{width:150,height:150,border:"2px solid green",borderTopColor:"transparent",borderRightColor:"transparent"}})})},w=r(27),I=r.n(w),L=r(7),k=r(21),R=r.n(k),S="https://ecomerce-master.herokuapp.com",F=r(25),A=r.n(F),N=r(16),E=r.n(N),_=r(32),D=r.n(_),T=r(31),z=r.n(T),G=r(28),P=r.n(G),U=function(e){var t=e._id,r=e.image,n=e.product_name,c=e.price,a=e.brand,s=e.category,i=e.description;return Object(g.jsxs)(E.a,{children:[Object(g.jsx)(E.a.Image,{size:"4by3",src:r}),Object(g.jsxs)(E.a.Content,{children:[Object(g.jsx)(z.a,{children:Object(g.jsxs)(z.a.Item,{children:[Object(g.jsx)(I.a,{size:4,children:n}),Object(g.jsxs)(I.a,{subtitle:!0,size:6,children:[Object(g.jsxs)(P.a.Group,{gapless:!0,children:[Object(g.jsx)(P.a,{color:"primary",children:a}),Object(g.jsxs)(P.a,{color:"info",children:[s," "]})]}),Object(g.jsxs)("span",{className:"is-size-4",children:["$",c]})]})]})}),Object(g.jsx)(D.a,{children:i})]}),Object(g.jsx)(E.a.Footer,{children:Object(g.jsx)(E.a.Footer.Item,{renderAs:"span",children:Object(g.jsx)(o.b,{to:"/ecommerce/product/".concat(t),children:"Details"})})})]})},M={isLoading:!1,products:null,error:null},B=function(e,t){switch(t.type){case"LOAD_PRODUCTS":return Object(L.a)(Object(L.a)({},e),{},{products:t.products,isLoading:!1});case"ERROR":return Object(L.a)(Object(L.a)({},e),{},{error:t.error,isLoading:!1});case"LOADING":return Object(L.a)(Object(L.a)({},e),{},{isLoading:!0})}},J=r(3),W=r(15),H=r.n(W),$=function(){var e=c.a.useReducer(B,M),t=Object(d.a)(e,2),r=t[0],n=t[1],a=c.a.useState(""),s=Object(d.a)(a,2),o=s[0],i=s[1],u=function(){var e=Object(l.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"LOADING"}),e.next=3,R.a.get("".concat(S,"/api/v1/item"));case 3:if(t=e.sent,r=t.data,""!==o){e.next=7;break}return e.abrupt("return",n({type:"LOAD_PRODUCTS",products:r}));case 7:return e.abrupt("return",n({type:"LOAD_PRODUCTS",products:r.filter((function(e){return e.product_name.toLowerCase().includes(o.toLowerCase())}))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.useEffect(Object(l.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:"LOADING"}),e.next=4,R.a.get("".concat(S,"/api/v1/item"));case 4:t=e.sent,r=t.data,n({type:"LOAD_PRODUCTS",products:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:"ERROR",error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),r.isLoading?Object(g.jsx)(v,{}):Object(g.jsx)(O.a,{children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(A.a.Column,{size:10,children:Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Search"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{color:"info",value:o,onChange:function(e){var t=e.target.value;i(t)},name:"search",type:"search",placeholder:"Product name"})})]})}),Object(g.jsx)(A.a.Column,{size:2,style:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"2.5em"},children:Object(g.jsx)(J.Field,{children:Object(g.jsx)(J.Control,{children:Object(g.jsx)(H.a,{type:"primary",color:"primary",rounded:!0,onClick:function(){return u()},children:"Search"})})})}),r.products&&r.products.map((function(e){return Object(g.jsx)(A.a.Column,{size:4,children:Object(g.jsx)(U,Object(L.a)({},e))},e._id)}))]})})},q=r(26),K=r(30),Q=r.n(K),V=function(){var e=c.a.useState({email:"",password:""}),t=Object(d.a)(e,2),r=t[0],n=t[1],a=c.a.useContext(b).signIn,s=function(e){var t=e.target,c=t.name,a=t.value;n(Object(L.a)(Object(L.a)({},r),{},Object(q.a)({},c,a)))};return Object(g.jsx)(O.a,{children:Object(g.jsxs)(Q.a,{children:[Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Email"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.email,onChange:s,name:"email",type:"email",placeholder:"Email@domain.com"})})]}),Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Password"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.password,onChange:s,name:"password",type:"password",placeholder:"Password"})})]}),Object(g.jsxs)(J.Field,{style:{display:"flex",justifyContent:"center"},children:[Object(g.jsx)(J.Control,{children:Object(g.jsx)(H.a,{type:"primary",color:"primary",rounded:!0,renderAs:"span",children:Object(g.jsx)(o.b,{to:"/ecommerce/sign-up",children:"Register"})})}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(H.a,{style:{marginLeft:"1em"},type:"primary",color:"primary",rounded:!0,onClick:function(){return a(r)},children:"Log in"})})]})]})})},X=function(){var e=c.a.useState({email:"",first_name:"",last_name:"",password:"",role:"CUSTOMER"}),t=Object(d.a)(e,2),r=t[0],n=t[1],a=c.a.useContext(b).signUp,s=function(e){var t=e.target,c=t.name,a=t.value;n(Object(L.a)(Object(L.a)({},r),{},Object(q.a)({},c,a)))};return Object(g.jsx)(O.a,{children:Object(g.jsxs)(Q.a,{children:[Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"First Name"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.first_name,onChange:s,name:"first_name",type:"text",placeholder:"John"})})]}),Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Last Name"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.last_name,onChange:s,name:"last_name",type:"text",placeholder:"Doe"})})]}),Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Email"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.email,onChange:s,name:"email",type:"email",placeholder:"Email@domain.com"})})]}),Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Password"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.password,onChange:s,type:"password",placeholder:"Password"})})]}),Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Role"}),Object(g.jsx)(J.Control,{children:Object(g.jsxs)(J.Select,{value:r.role,onChange:s,name:"role",children:[Object(g.jsx)("option",{value:"CUSTOMER",children:"CUSTOMER"}),Object(g.jsx)("option",{value:"ADMIN",children:"ADMIN"})]})})]}),Object(g.jsx)(J.Field,{style:{display:"flex",justifyContent:"center"},children:Object(g.jsx)(J.Control,{children:Object(g.jsx)(H.a,{color:"primary",rounded:!0,type:"primary",onClick:function(){return a(r)},children:"Create"})})})]})})},Y=function(){var e=c.a.useState({product:null,isLoading:null,error:null}),t=Object(d.a)(e,2),r=t[0],n=t[1],a=window.localStorage.getItem("token"),s=Object(m.f)(),o=Object(m.g)().productId;if(c.a.useEffect(Object(l.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Object(L.a)(Object(L.a)({},r),{},{isLoading:!0})),e.next=4,R.a.get("".concat(S,"/api/v1/item/").concat(o));case 4:t=e.sent,c=t.data,n(Object(L.a)(Object(L.a)({},r),{},{isLoading:!1,product:c})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(Object(L.a)(Object(L.a)({},r),{},{error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),r.isLoading||!r.product)return Object(g.jsx)(v,{});var i=r.product,u=i.image,b=i.product_name,p=i.brand,h=i.category,x=i.price,f=i.description;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(O.a,{children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(A.a.Column,{size:6,children:Object(g.jsx)(E.a,{children:Object(g.jsx)(E.a.Image,{size:"4by3",src:u})})}),Object(g.jsx)(A.a.Column,{size:6,children:Object(g.jsxs)(E.a,{children:[Object(g.jsxs)(E.a.Content,{children:[Object(g.jsx)(z.a,{children:Object(g.jsxs)(z.a.Item,{children:[Object(g.jsx)(I.a,{size:4,children:b}),Object(g.jsxs)(I.a,{subtitle:!0,size:6,children:[Object(g.jsxs)(P.a.Group,{gapless:!0,children:[Object(g.jsx)(P.a,{color:"primary",children:p}),Object(g.jsxs)(P.a,{color:"info",children:[h," "]})]}),Object(g.jsxs)("span",{className:"is-size-4",children:["$",x]})]})]})}),Object(g.jsx)(D.a,{children:f})]}),Object(g.jsxs)(E.a.Footer,{children:[Object(g.jsx)(E.a.Footer.Item,{children:Object(g.jsx)(H.a,{type:"primary",color:"primary",children:"Add to Car"})}),Object(g.jsx)(E.a.Footer.Item,{children:a?Object(g.jsx)(H.a,{type:"primary",color:"primary",children:"Buy"}):Object(g.jsx)(H.a,{type:"primary",color:"primary",onClick:function(){s.push("/ecommerce/login")},children:"Login and Buy"})})]})]})})]})})})},Z=function(){var e=c.a.useState({email:"margaro@holia123.com",password:"heybro"}),t=Object(d.a)(e,2),r=t[0],n=t[1],a=c.a.useContext(b).signIn,s=function(e){var t=e.target,c=t.name,a=t.value;n(Object(L.a)(Object(L.a)({},r),{},Object(q.a)({},c,a)))};return Object(g.jsx)(O.a,{children:Object(g.jsxs)(Q.a,{children:[Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Email"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.email,onChange:s,name:"email",type:"email",placeholder:"Email@domain.com"})})]}),Object(g.jsxs)(J.Field,{children:[Object(g.jsx)(J.Label,{children:"Password"}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(J.Input,{value:r.password,onChange:s,name:"password",type:"password",placeholder:"Password"})})]}),Object(g.jsxs)(J.Field,{style:{display:"flex",justifyContent:"center"},children:[Object(g.jsx)(J.Control,{children:Object(g.jsx)(H.a,{type:"primary",color:"primary",rounded:!0,renderAs:"span",children:Object(g.jsx)(o.b,{to:"/ecommerce/sign-up",children:"Register"})})}),Object(g.jsx)(J.Control,{children:Object(g.jsx)(H.a,{style:{marginLeft:"1em"},type:"primary",color:"primary",rounded:!0,onClick:function(){return a(r)},children:"Log in"})})]})]})})},ee=function(){return Object(g.jsxs)(m.c,{children:[Object(g.jsx)(m.a,{exact:!0,path:"/ecommerce/",component:$}),Object(g.jsx)(m.a,{path:"/ecommerce/sign-up",component:X}),Object(g.jsx)(m.a,{path:"/ecommerce/login",component:V}),Object(g.jsx)(m.a,{path:"/ecommerce/product/:productId",component:Y}),Object(g.jsx)(m.a,{path:"/ecommerce/create-product",component:Z})]})},te={isLoading:!1,isSignout:!1,userToken:null,me:null,error:null},re=function(e,t){switch(t.type){case"SIGN_IN":return window.localStorage.setItem("token",t.token),Object(L.a)(Object(L.a)({},e),{},{isSignout:!1,isLoading:!1,error:null,userToken:t.token,me:t.me});case"ERROR":return Object(L.a)(Object(L.a)({},e),{},{isSignout:!0,userToken:null,isLoading:!1,error:t.error});case"SIGN_OUT":return window.localStorage.removeItem("token"),Object(L.a)(Object(L.a)({},e),{},{isSignout:!0,isLoading:!1,userToken:null,me:null});case"LOADING":return Object(L.a)(Object(L.a)({},e),{},{isLoading:!0})}},ne=function(){var e=c.a.useReducer(re,te),t=Object(d.a)(e,2),r=t[0],n=t[1],a=Object(m.f)(),s=c.a.useMemo((function(){return{signIn:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,c,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:"LOADING"}),e.next=4,R.a.post("".concat(S,"/api/v1/login"),t);case 4:return r=e.sent,c=r.data,e.next=8,R.a.get("".concat(S,"/api/v1/user/me"),{headers:{Authorization:"JWT ".concat(c.token)}});case 8:s=e.sent,o=s.data,n({type:"SIGN_IN",token:c.token,me:o.user}),a.push("/ecommerce"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n({type:"ERROR",error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),signUp:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,c,s,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:"LOADING"}),e.next=4,R.a.post("".concat(S,"/api/v1/signup"),t);case 4:return r={email:t.email,password:t.password},e.next=7,R.a.post("".concat(S,"/api/v1/login"),r);case 7:return c=e.sent,s=c.data,e.next=11,R.a.get("".concat(S,"/api/v1/user/me"),{headers:{Authorization:"JWT ".concat(s.token)}});case 11:o=e.sent,i=o.data,n({type:"SIGN_IN",token:s.token,me:i.user}),a.push("/ecommerce"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),n({type:"ERROR",error:e.t0});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),signOut:function(){return n({type:"SIGN_OUT"})}}}),[]);return c.a.useEffect(Object(l.a)(j.a.mark((function e(){var t,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=window.localStorage.getItem("token"))){e.next=9;break}return n({type:"LOADING"}),e.next=6,R.a.get("".concat(S,"/api/v1/user/me"),{headers:{Authorization:"JWT ".concat(t)}});case 6:r=e.sent,c=r.data,n({type:"SIGN_IN",token:t,me:c.user});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n({type:"ERROR",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),r.isLoading?Object(g.jsx)(v,{}):r.error?Object(g.jsx)(O.a,{style:{display:"flex",justifyContent:"center"},children:Object(g.jsx)("span",{className:"bd-notification is-danger",children:Object(g.jsxs)(I.a,{subtitle:!0,renderAs:"p",children:["Error: ",r.error.message]})})}):Object(g.jsxs)(b.Provider,{value:s,children:[r.me?Object(g.jsx)(f,{user:r.me}):Object(g.jsx)(f,{}),Object(g.jsx)(ee,{})]})},ce=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,151)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(o.a,{children:Object(g.jsx)(ne,{})})}),document.getElementById("root")),ce()},55:function(e,t,r){},56:function(e,t,r){}},[[150,1,2]]]);
//# sourceMappingURL=main.c7039945.chunk.js.map